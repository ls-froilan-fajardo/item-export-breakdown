<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Item Export Breakdown</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 40px;
      transition: background-color 0.3s, color 0.3s;
    }

    body.light-mode {
      background-color: #f7f7f7;
      color: #1e1e1e;
    }
    body.light-mode table { background-color: #ffffff; color: #1e1e1e; }
    body.light-mode th { background-color: #f0f0f0; color: #1e1e1e; }
    body.light-mode tr:nth-child(even) { background-color: #f7f7f7; }
    body.light-mode #comboOptions, body.light-mode #nameValidation { background-color: #ffffff; color: #1e1e1e; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
    body.light-mode button { color: #fff; }

    body.dark-mode {
      background-color: #1e1e1e;
      color: #f4f4f4;
    }
    body.dark-mode table { background-color: #2c2c2c; color: #f4f4f4; }
    body.dark-mode th { background-color: #3a3a3a; color: #f4f4f4; }
    body.dark-mode tr:nth-child(even) { background-color: #2a2a2a; }
    body.dark-mode #comboOptions, body.dark-mode #nameValidation { background-color: #2c2c2c; color: #f4f4f4; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }

    h1 { margin-bottom: 5px; font-size: 2rem; }
    p { margin-bottom: 20px; font-size: 1rem; }
    input[type="file"], label, button { margin: 10px 0; display: block; font-size: 0.95rem; }
    button { padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; transition: background-color 0.3s ease; }
    #clearFile { background-color: #dc3545; }
    #clearFile:hover { background-color: #a71d2a; }
    #downloadCSV { background-color: #007BFF; margin-bottom: 10px; }
    #downloadCSV:hover { background-color: #0056b3; }

    table { width: 100%; border-collapse: collapse; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-top: 10px; transition: background-color 0.3s, color 0.3s; }
    th, td { padding: 12px 16px; border-bottom: 1px solid #555; text-align: left; }
    th { font-weight: 600; }
    tr:last-child td { border-bottom: none; }

    #comboOptions, #nameValidation { display: inline-block; vertical-align: top; width: 48%; margin-right: 2%; margin-bottom: 20px; padding: 20px; border-radius: 8px; }
    #nameValidation { margin-right: 0; }
    #comboOptions h2, #nameValidation h2 { margin-top: 0; font-size: 1.2rem; border-bottom: 1px solid; padding-bottom: 8px; margin-bottom: 12px; }
    label { display: block; margin-bottom: 8px; cursor: pointer; }
    input[type=radio] { margin-right: 8px; }
    #downloadContainer { margin-top: 10px; margin-bottom: 10px; }
    #themeToggle { position: absolute; top: 20px; right: 40px; padding: 6px 12px; border-radius: 4px; cursor: pointer; border: none; }
    #themeToggle.light { background-color: #6c757d; color: #fff; }
    #themeToggle.light:hover { background-color: #5a6268; }
    #themeToggle.dark { background-color: #343a40; color: #fff; }
    #themeToggle.dark:hover { background-color: #23272b; }
  </style>
</head>
<body class="dark-mode">
  <button id="themeToggle" class="dark">Dark mode: On</button>
  <h1>Item Export Breakdown</h1>
  <p>Upload a CSV to analyze the breakdown of combos and validate that item names comply with WEB-SRM restrictions.</p>

  <input type="file" id="csvFile" accept=".csv" />
  <button id="clearFile">Clear File</button>

  <div style="display:flex; justify-content: space-between;">
    <div id="comboOptions">
      <h2>Combo Breakdown</h2>
      <label><input type="radio" name="viewOption" id="filterCheckbox" checked /> Show only combos with items and sub-items</label>
      <label><input type="radio" name="viewOption" id="showAllCheckbox" /> Show all combos</label>
    </div>

    <div id="nameValidation">
      <h2>WEB-SRM Item Name Validation</h2>
      <label><input type="radio" name="viewOption" id="showInvalidCheckbox" /> Show invalid items only</label>
      <label><input type="radio" name="viewOption" id="listNamesCheckbox" /> Show all items</label>
    </div>
  </div>

  <div id="downloadContainer" style="display:none;">
    <button id="downloadCSV">Download Table as CSV</button>
  </div>

  <table id="resultTable" style="display:none;">
    <thead>
      <tr>
        <th>SKU</th>
        <th>Combo Name / Item Name</th>
        <th class="typeColumn">Type</th>
        <th class="validityColumn">Validity Reason</th>
        <th>Groups</th>
        <th>Items</th>
        <th>Sub-items</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', () => {
      if(document.body.classList.contains('dark-mode')){
        document.body.classList.remove('dark-mode');
        document.body.classList.add('light-mode');
        themeToggle.classList.remove('dark'); themeToggle.classList.add('light');
        themeToggle.textContent = 'Dark mode: Off';
      } else {
        document.body.classList.remove('light-mode');
        document.body.classList.add('dark-mode');
        themeToggle.classList.remove('light'); themeToggle.classList.add('dark');
        themeToggle.textContent = 'Dark mode: On';
      }
    });

    // --- Existing JS logic for file input, clear, download, radio buttons, CSV parsing, table rendering ---
    // (keep as in current code)

  </script>
</body>
</html>
